{"ast":null,"code":"export default function uploadImg(username, file) {\n  //need accesstoken\n  const dropboxToken = \"cjIr0_-l1IkAAAAAAAAATyip01UKY7QYj04vxBvGes4OtKs-jlsIZcC4acHNG_JD\";\n  var xhr = new XMLHttpRequest();\n  let safeName = username.replace(\"ø\", \"%C3%B5\").replace(\"å\", \"%C3%A5\").replace(\"æ\", \"%C3%A6\").replace(\"Ø\", \"%C3%98\").replace(\"Å\", \"%C3%85\").replace(\"Æ\", \"%C3%86\");\n\n  xhr.upload.onprogress = function (evt) {\n    var percentComplete = parseInt(100.0 * evt.loaded / evt.total); // Upload in progress. Do something here with the percent complete.\n  };\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      var fileInfo = JSON.parse(xhr.response); // Upload succeeded. Do something here with the file info.\n\n      console.log(fileInfo);\n    } else {\n      var errorMessage = xhr.response || \"Unable to upload file\"; // Upload failed. Do something here with the error.\n    }\n  };\n\n  xhr.open(\"POST\", \"https://content.dropboxapi.com/2/files/upload\");\n  xhr.setRequestHeader(\"Authorization\", \"Bearer \" + dropboxToken);\n  xhr.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\n  xhr.setRequestHeader(\"Dropbox-API-Arg\", JSON.stringify({\n    path: \"/\" + safeName + \".jpeg\",\n    mode: \"add\",\n    autorename: true,\n    mute: false\n  }));\n  xhr.send(file);\n}","map":{"version":3,"sources":["R:/React/foos-test/foos-master/src/services/uploadImg.js"],"names":["uploadImg","username","file","dropboxToken","xhr","XMLHttpRequest","safeName","replace","upload","onprogress","evt","percentComplete","parseInt","loaded","total","onload","status","fileInfo","JSON","parse","response","console","log","errorMessage","open","setRequestHeader","stringify","path","mode","autorename","mute","send"],"mappings":"AAAA,eAAe,SAASA,SAAT,CAAmBC,QAAnB,EAA6BC,IAA7B,EAAmC;AAChD;AACA,QAAMC,YAAY,GAChB,kEADF;AAEA,MAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AAEA,MAAIC,QAAQ,GAAGL,QAAQ,CACpBM,OADY,CACJ,GADI,EACC,QADD,EAEZA,OAFY,CAEJ,GAFI,EAEC,QAFD,EAGZA,OAHY,CAGJ,GAHI,EAGC,QAHD,EAIZA,OAJY,CAIJ,GAJI,EAIC,QAJD,EAKZA,OALY,CAKJ,GALI,EAKC,QALD,EAMZA,OANY,CAMJ,GANI,EAMC,QAND,CAAf;;AAQAH,EAAAA,GAAG,CAACI,MAAJ,CAAWC,UAAX,GAAwB,UAASC,GAAT,EAAc;AACpC,QAAIC,eAAe,GAAGC,QAAQ,CAAE,QAAQF,GAAG,CAACG,MAAb,GAAuBH,GAAG,CAACI,KAA5B,CAA9B,CADoC,CAEpC;AACD,GAHD;;AAKAV,EAAAA,GAAG,CAACW,MAAJ,GAAa,YAAW;AACtB,QAAIX,GAAG,CAACY,MAAJ,KAAe,GAAnB,EAAwB;AACtB,UAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWf,GAAG,CAACgB,QAAf,CAAf,CADsB,CAEtB;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACD,KAJD,MAIO;AACL,UAAIM,YAAY,GAAGnB,GAAG,CAACgB,QAAJ,IAAgB,uBAAnC,CADK,CAEL;AACD;AACF,GATD;;AAWAhB,EAAAA,GAAG,CAACoB,IAAJ,CAAS,MAAT,EAAiB,+CAAjB;AACApB,EAAAA,GAAG,CAACqB,gBAAJ,CAAqB,eAArB,EAAsC,YAAYtB,YAAlD;AACAC,EAAAA,GAAG,CAACqB,gBAAJ,CAAqB,cAArB,EAAqC,0BAArC;AACArB,EAAAA,GAAG,CAACqB,gBAAJ,CACE,iBADF,EAEEP,IAAI,CAACQ,SAAL,CAAe;AACbC,IAAAA,IAAI,EAAE,MAAMrB,QAAN,GAAiB,OADV;AAEbsB,IAAAA,IAAI,EAAE,KAFO;AAGbC,IAAAA,UAAU,EAAE,IAHC;AAIbC,IAAAA,IAAI,EAAE;AAJO,GAAf,CAFF;AAUA1B,EAAAA,GAAG,CAAC2B,IAAJ,CAAS7B,IAAT;AACD","sourcesContent":["export default function uploadImg(username, file) {\r\n  //need accesstoken\r\n  const dropboxToken =\r\n    \"cjIr0_-l1IkAAAAAAAAATyip01UKY7QYj04vxBvGes4OtKs-jlsIZcC4acHNG_JD\";\r\n  var xhr = new XMLHttpRequest();\r\n\r\n  let safeName = username\r\n    .replace(\"ø\", \"%C3%B5\")\r\n    .replace(\"å\", \"%C3%A5\")\r\n    .replace(\"æ\", \"%C3%A6\")\r\n    .replace(\"Ø\", \"%C3%98\")\r\n    .replace(\"Å\", \"%C3%85\")\r\n    .replace(\"Æ\", \"%C3%86\");\r\n\r\n  xhr.upload.onprogress = function(evt) {\r\n    var percentComplete = parseInt((100.0 * evt.loaded) / evt.total);\r\n    // Upload in progress. Do something here with the percent complete.\r\n  };\r\n\r\n  xhr.onload = function() {\r\n    if (xhr.status === 200) {\r\n      var fileInfo = JSON.parse(xhr.response);\r\n      // Upload succeeded. Do something here with the file info.\r\n      console.log(fileInfo);\r\n    } else {\r\n      var errorMessage = xhr.response || \"Unable to upload file\";\r\n      // Upload failed. Do something here with the error.\r\n    }\r\n  };\r\n\r\n  xhr.open(\"POST\", \"https://content.dropboxapi.com/2/files/upload\");\r\n  xhr.setRequestHeader(\"Authorization\", \"Bearer \" + dropboxToken);\r\n  xhr.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\r\n  xhr.setRequestHeader(\r\n    \"Dropbox-API-Arg\",\r\n    JSON.stringify({\r\n      path: \"/\" + safeName + \".jpeg\",\r\n      mode: \"add\",\r\n      autorename: true,\r\n      mute: false\r\n    })\r\n  );\r\n\r\n  xhr.send(file);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}