{"ast":null,"code":"var _jsxFileName = \"R:\\\\React\\\\foos-test\\\\foos-master\\\\src\\\\pages\\\\home\\\\Home.js\";\nimport React, { useEffect } from \"react\";\nimport openSocket from \"socket.io-client\";\nimport \"./_home.scss\";\nimport Container from \"@material-ui/core/Container\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { fetchMatches } from \"../../redux/matches/match-action\";\nimport { fetchPlayers, sortPlayersBy } from \"../../redux/players/player-action\";\nimport PlayerCard from \"../../components/playerCard/PlayerCard\";\nimport LiveMatches from \"../../components/liveMatches/LiveMatches\";\nimport ResultList from \"../../components/resultList/ResultList\";\nimport calculateRatingAdjustment from \"../../services/calculateRatingAdjustment\";\n\nconst Home = () => {\n  const dispatch = useDispatch();\n\n  const _useSelector = useSelector(state => state.matchReducer),\n        matches = _useSelector.matches;\n\n  const _useSelector2 = useSelector(state => state.playerReducer),\n        players = _useSelector2.players,\n        departments = _useSelector2.departments,\n        sortBy = _useSelector2.sortBy;\n\n  let sortedMatches = [...matches];\n  let playerList = [...players];\n  sortBy === \"All\" ? playerList = playerList : playerList = playerList.filter(player => player.department === sortBy);\n\n  if (sortedMatches.length > 0) {\n    sortedMatches = sortedMatches.sort((b, a) => b.createdAt > a.createdAt ? -1 : 1);\n  }\n\n  useEffect(() => {\n    dispatch(fetchMatches());\n    dispatch(fetchPlayers());\n    const socket = openSocket(\"http://localhost:4001\");\n    socket.on(\"updateMatches\", () => {\n      dispatch(fetchMatches());\n    });\n    socket.on(\"updatePlayers\", () => {\n      dispatch(fetchPlayers());\n    });\n  }, []);\n\n  const renderPlayers = () => {\n    let playersByWin = [...playerList];\n    playersByWin = playersByWin.sort((a, b) => a.stats.rating > b.stats.rating ? -1 : 1);\n    return React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, playersByWin.map(p => React.createElement(\"li\", {\n      key: p._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(PlayerCard, {\n      player: p,\n      matches: matches,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }))));\n  };\n\n  const filterDepartment = dep => {\n    console.log(calculateRatingAdjustment(-51));\n    dispatch(sortPlayersBy(dep));\n    console.log(dep);\n  };\n\n  const renderTabs = () => {\n    return React.createElement(\"div\", {\n      className: \"c_playerList-tabs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      key: \"All\",\n      className: \"tablinks\",\n      id: \"tab-All\",\n      onClick: () => {\n        filterDepartment(\"All\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"All\"), departments.map(dep => React.createElement(\"button\", {\n      key: dep,\n      className: \"tablinks\",\n      onClick: () => {\n        filterDepartment(dep);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, dep)));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"background-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row c_home-container \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, matches && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(LiveMatches, {\n    matches: matches,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"live-matches-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Scoreboard\"), React.createElement(ResultList, {\n    matches: sortedMatches,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    className: \"col c_playerList\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, renderTabs(), renderPlayers())));\n};\n\nexport default Home;","map":{"version":3,"sources":["R:/React/foos-test/foos-master/src/pages/home/Home.js"],"names":["React","useEffect","openSocket","Container","useSelector","useDispatch","fetchMatches","fetchPlayers","sortPlayersBy","PlayerCard","LiveMatches","ResultList","calculateRatingAdjustment","Home","dispatch","state","matchReducer","matches","playerReducer","players","departments","sortBy","sortedMatches","playerList","filter","player","department","length","sort","b","a","createdAt","socket","on","renderPlayers","playersByWin","stats","rating","map","p","_id","filterDepartment","dep","console","log","renderTabs"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport openSocket from \"socket.io-client\";\r\nimport \"./_home.scss\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { fetchMatches } from \"../../redux/matches/match-action\";\r\nimport { fetchPlayers, sortPlayersBy } from \"../../redux/players/player-action\";\r\nimport PlayerCard from \"../../components/playerCard/PlayerCard\";\r\nimport LiveMatches from \"../../components/liveMatches/LiveMatches\";\r\nimport ResultList from \"../../components/resultList/ResultList\";\r\nimport calculateRatingAdjustment from \"../../services/calculateRatingAdjustment\";\r\n\r\nconst Home = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { matches } = useSelector(state => state.matchReducer);\r\n\r\n  const { players, departments, sortBy } = useSelector(\r\n    state => state.playerReducer\r\n  );\r\n\r\n  let sortedMatches = [...matches];\r\n\r\n  let playerList = [...players];\r\n  sortBy === \"All\"\r\n    ? (playerList = playerList)\r\n    : (playerList = playerList.filter(player => player.department === sortBy));\r\n\r\n  if (sortedMatches.length > 0) {\r\n    sortedMatches = sortedMatches.sort((b, a) =>\r\n      b.createdAt > a.createdAt ? -1 : 1\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchMatches());\r\n    dispatch(fetchPlayers());\r\n\r\n    const socket = openSocket(\"http://localhost:4001\");\r\n\r\n    socket.on(\"updateMatches\", () => {\r\n      dispatch(fetchMatches());\r\n    });\r\n    socket.on(\"updatePlayers\", () => {\r\n      dispatch(fetchPlayers());\r\n    });\r\n  }, []);\r\n\r\n  const renderPlayers = () => {\r\n    let playersByWin = [...playerList];\r\n    playersByWin = playersByWin.sort((a, b) =>\r\n      a.stats.rating > b.stats.rating ? -1 : 1\r\n    );\r\n\r\n    return (\r\n      <ul>\r\n        {playersByWin.map(p => (\r\n          <li key={p._id}>\r\n            <PlayerCard player={p} matches={matches} />\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  const filterDepartment = dep => {\r\n    console.log(calculateRatingAdjustment(-51));\r\n    dispatch(sortPlayersBy(dep));\r\n    console.log(dep);\r\n  };\r\n\r\n  const renderTabs = () => {\r\n    return (\r\n      <div className=\"c_playerList-tabs\">\r\n        <button\r\n          key=\"All\"\r\n          className=\"tablinks\"\r\n          id=\"tab-All\"\r\n          onClick={() => {\r\n            filterDepartment(\"All\");\r\n          }}\r\n        >\r\n          All\r\n        </button>\r\n        {departments.map(dep => (\r\n          <button\r\n            key={dep}\r\n            className=\"tablinks\"\r\n            onClick={() => {\r\n              filterDepartment(dep);\r\n            }}\r\n          >\r\n            {dep}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"background-dark\">\r\n      <div className=\"row c_home-container \">\r\n        <div className=\"col\">\r\n          <Container>\r\n            {matches && (\r\n              <div>\r\n                <LiveMatches matches={matches} />\r\n                <div className=\"live-matches-header\">Scoreboard</div>\r\n                <ResultList matches={sortedMatches} />\r\n              </div>\r\n            )}\r\n          </Container>\r\n        </div>\r\n        <div className=\"col c_playerList\">\r\n          {renderTabs()}\r\n          {renderPlayers()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}